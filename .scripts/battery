#!/usr/bin/sh

battery="/sys/class/power_supply/BAT0"
percent="$(cat "$battery/capacity" 2>&1)"
status="$(cat "$battery/status" 2>&1)"
case "$status" in
	"Full") icon="ï–„" ;;
	"Discharging")
		if [ $percent = 100 ]; then
		    icon="ï•¸"
		elif [ $percent -gt 89 ]; then
		    icon="ï–"
		elif [ $percent -gt 79 ]; then
		    icon="ï–€"
		elif [ $percent -gt 69 ]; then
		    icon="ï•¿"
		elif [ $percent -gt 59 ]; then
		    icon="ï•¾"
		elif [ $percent -gt 49 ]; then
		    icon="ï•½"
		elif [ $percent -gt 39 ]; then
		    icon="ï•¼"
		elif [ $percent -gt 30 ]; then
		    icon="ï•»"
		elif [ $percent = 30 ]; then
		    icon="ï•º"
		    $("dunstify -r '55555' -u normal '$percent % is remaining'")
		elif [ $percent -gt 19 ]; then
		    icon="ï•º"
		elif [ $percent = 20 ]; then
		    icon="ï•º"
		    $("dunstify -r '55555' -u normal '$percent % is remaining'")
		elif [ $percent -gt 10 ]; then
		    icon="ï•¹"
		elif [ $percent = 10 ]; then
		    icon="ï–‚"
		    $("dunstify -r '55555' -u critical '$percent % is remaining'")
		elif [ $percent -ge 0 ]; then
		    icon="ï–‚"
		fi ;;

	"Charging")
		if [ $percent = 100 ]; then
			icon="ï–„"
		elif [ $percent -gt 89 ]; then
			icon="ï–Š"
		elif [ $percent -gt 69 ]; then
			icon="ï–‰"
		elif [ $percent -gt 49 ]; then
			icon="ï–ˆ"
		elif [ $percent -gt 39 ]; then
			icon="ï–‡"
		elif [ $percent -gt 29 ]; then
			icon="ï–†"
		elif [ $percent -ge 0 ]; then
			icon="ï–…"
		fi ;;

	"Not charging") icon="ğŸ›‘" ;;
	"Unknown") icon="ï€¡" ;;
	*) exit 1 ;;
esac
# Will make a warn variable if discharging and low
#[ "$status" = "" ] && [ "$capacity" -le 25 ] && warn="â—"
# Prints the info
printf "%s %d%%" "$icon" "$percent";
